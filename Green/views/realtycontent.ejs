<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Green Bootstrap Template - Index</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="../assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Green
  * Template URL: https://bootstrapmade.com/green-free-one-page-bootstrap-template/
  * Updated: Mar 17 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Top Bar ======= -->
  <section id="topbar" class="d-flex align-items-center">
    <div class="container d-flex justify-content-center justify-content-md-between">
      <div class="contact-info d-flex align-items-center">
        <i class="bi bi-envelope-fill"></i><a href="mailto:contact@example.com">info@example.com</a>
        <i class="bi bi-phone-fill phone-icon"></i> +1 5589 55488 55
      </div>
      <div class="social-links d-none d-md-block">
        <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></i></a>
      </div>
    </div>
  </section>

  <!-- ======= Header ======= -->
  <header id="header" class="d-flex align-items-center">
    <div class="container d-flex align-items-center">

        <h1 class="logo me-auto"><a href="/index">Green</a></h1>
        <!-- Uncomment below if you prefer to use an image logo -->
        <!-- <a href="index.html" class="logo me-auto"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->

        <nav id="navbar" class="navbar">
            <ul>
                <li><a class="nav-link scrollto active" href="#hero">개인</a></li>
                <li><a class="nav-link scrollto" href="#about">기업</a></li>
                <li><a class="nav-link scrollto" href="#services">금융상품</a></li>
                <li><a class="nav-link scrollto " href="#portfolio">자산관리</a></li>
                <li><a class="nav-link scrollto" href="/realty">부동산</a></li>
                <li><a class="nav-link scrollto" href="#team">퇴직연금</a></li>
                <li><a class="nav-link scrollto" href="#team">카드</a></li>
                <li class="dropdown"><a href="#"><span>전체 서비스</span> <i class="bi bi-chevron-down"></i></a>
                    <ul>
                        <li><a href="#">금융 서비스</a></li>
                        <li><a href="#">특화 서비스</a></li>
                        <li><a href="#">멤버십 서비스</a></li>
                        <li><a href="#">GREEN과 함께</a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="#"><span>Global</span> <i class="bi bi-chevron-down"></i></a>
                    <ul>
                        <li><a href="#"><img src="../assets/img/korean.png" style="height: 20px;" alt="">Korean</a>
                        </li>
                        <li><a href="#"><img src="../assets/img/english.png" style="height: 20px;"
                                    alt="">English</a></li>
                        <li><a href="#"><img src="../assets/img/chinese.png" style="height: 20px;"
                                    alt="">Chinese</a></li>
                        <li><a href="#"><img src="../assets/img/japanese.png" style="height: 20px;"
                                    alt="">Japanese</a></li>
                    </ul>
                </li>
                <% if (isLoggedIn) {%>
                    <li><a class="getstarted scrollto" href="/logout">로그아웃</a></li>
                <% } else { %>
                    <li><a class="getstarted scrollto" href="/login">로그인</a></li>
                <% } %>
            </ul>
            <i class="bi bi-list mobile-nav-toggle"></i>
        </nav>


    </div>
</header><!-- End Header -->





  <div class="container mt-5">
    <div class="row">
      <div class="col-lg-6">
        <div id="map" style="width:100%; height:500px;"></div>
      </div>
      <div class="col-lg-6">
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">
              <%=data.address%>
                <%=data.extraAddress%>
                  <p><%=data.block%>동 <%=data.unit%>호</p>
            </h4>
          </div>
          <div class="card-body">
            <p class="card-text">
              평수: <%=data.area%>
            </p>
            <p class="card-text">
              주거 형태: <%=data.housing_type%>
            </p>
            <p class="card-text">
              가격: <%=data.price.toLocaleString()%>원
            </p>
            <p class="card-subtitle mb-5"> 등록일 : <%=data.date%>
            </p>
            <button data-id="<%=data._id %>" class='buy btn btn-primary ms-2' style="background-color: #5cb874; border: none;">구매하기</button>
            <a href="/realtyedit/<%=data._id%>" class="btn btn-primary ms-2" style="background-color: #5cb874; border: none;">수정하기</a>
            <input type="hidden" id="data" value='<%=JSON.stringify(data)%>'>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script>
    $('.buy').click(function (e) {
      let item = $(this);
      let sid = e.target.dataset.id;
      if(confirm('구매하시겠습니까?')) {
        $.ajax({
        type: 'post',
        url: '/buy',
        data: { _id: sid}
      })
        .done(function (result) {
          alert(result.message);
          window.location.href='/realtylist';
        })
        .fail(function (xhr, textStatus, err) {
          alert(err);
        });
      }      
    });
  </script>


  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=1ed853d97ea70ea68eddbd6f8d4bddd5&libraries=services"></script>
  

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <script>
    $(document).ready(function() {
      const urlParams = new URLSearchParams(window.location.search);
      const message = urlParams.get('message');
      if (message) {
        alert(message);
      }
    }); 

    var jsonData = document.getElementById("data").value;
    var data = JSON.parse(jsonData);
    var sumAddress = data.address + data.extraAddress;
    // 주소-좌표 변환 객체를 생성합니다
    var geocoder = new kakao.maps.services.Geocoder();

    var callback = function(result, status) {
    if (status === kakao.maps.services.Status.OK) {
        console.log(result);
    }
    };

    geocoder.addressSearch(sumAddress, callback);

    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
      mapOption = {
        center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
      };

    // 지도를 생성합니다    
    var map = new kakao.maps.Map(mapContainer, mapOption);

    

    // 주소로 좌표를 검색합니다
    geocoder.addressSearch(sumAddress, function (result, status) {

      // 정상적으로 검색이 완료됐으면 
      if (status === kakao.maps.services.Status.OK) {

        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

        // 결과값으로 받은 위치를 마커로 표시합니다
        var marker = new kakao.maps.Marker({
          map: map,
          position: coords
        });



        // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
        map.setCenter(coords);
      }
    });
  </script>
  <!-- ======= Cta Section ======= -->
  <section id="cta" class="cta" style="margin-top: 70px;">
    <div class="container">

      <div class="row">
        <div class="col-lg-9 text-center text-lg-start">
          <h3>Call To Action</h3>
          <p> Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
            Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est
            laborum.</p>
        </div>
        <div class="col-lg-3 cta-btn-container text-center">
          <a class="cta-btn align-middle" href="#">Call To Action</a>
        </div>
      </div>

    </div>
  </section><!-- End Cta Section -->
  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <h3>Green</h3>
      <p>Et aut eum quis fuga eos sunt ipsa nihil. Labore corporis magni eligendi fuga maxime saepe commodi placeat.</p>
      <div class="social-links">
        <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
        <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
        <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
        <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
        <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
      </div>
      <div class="copyright">
        &copy; Copyright <strong><span>Green</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/green-free-one-page-bootstrap-template/ -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>
  </footer>

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="../assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="../assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="../assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="../assets/js/main.js"></script>

</body>

</html>